{% extends "layout_20240422_ur.html" %}
{% block pageTitle %}
  Add files - Keep Customer Interactions Safe
{% endblock %}
{% block beforeContent %}
  <section aria-label="Phase banner" role="region">
    {{ govukPhaseBanner({
      tag: {
        text: "beta"
      },
      html: 'This is a new service â€“ your <a class="govuk-link" href="11g_upload_error">feedback</a> will help us to improve it.'
    }) }}
  </section>
  {% include "templates/v2/header_searchlight.njk" %}
  <section aria-label="Back" role="region">
    {{ govukBackLink({
      text: "Back",
      href: "javascript:history.back()"
    }) }}
  </section>
{% endblock %}
{% block content %}
<script>
  function writeToContext(selectObj) { 
    const str = document.getElementById('documents').value;
    const words = str.split('\\');
    const last = words.pop();
    console.log(last);
  } 
</script>
<form action="/safeguarding/incident/fileupload" method="post" autocomplete="off" novalidate="" class="casa-journey-form">
	<input
		type="hidden"
		name="_csrf"
		value="11985c59d6fd72ee7065898e9a4b6a24ead8b36dae60ee90eb71cf073c789b98aaf3519a1037b9aded113791a0dbd187fe01f8e6cd178b09309fe84c49cf232df5e18f05bf4dc3351d4deef9226c03dc111688052172ac76d7bb8e1640a7ac870a52a40853ce2808e3cbed849070e5533a3e5dcf242ac8864142f9ca6b2d69e9"
	/>

	<input type="hidden" name="contextid" value="default" />

	<div class="govuk-notification-banner govuk-notification-banner--success sg-banner-success moj-hidden" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner" tabindex="0">
		<div class="govuk-notification-banner__header">
			<h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
				Success
			</h2>
		</div>
		<div class="govuk-notification-banner__content">
			<h3 class="govuk-notification-banner__heading sg-banner-success_info"></h3>
		</div>
	</div>

	<div class="govuk-notification-banner sg-banner-uploading moj-hidden" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner" tabindex="0">
		<div class="govuk-notification-banner__header">
			<h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
				Working
			</h2>
		</div>
		<div class="govuk-notification-banner__content">
			<h3 class="govuk-notification-banner__heading sg-banner-uploading_info"></h3>
			<div class="govuk-warning-text">
				<span class="govuk-warning-text__icon" aria-hidden="true">!</span>
				<strong class="govuk-warning-text__text">
					<span class="govuk-warning-text__assistive">Warning</span>
					Wait until the system has added all files
				</strong>
			</div>
		</div>
	</div>

	<div class="govuk-error-summary moj-hidden" data-disable-auto-focus="true" tabindex="0" id="errors" data-module="govuk-error-summary">
		<div role="alert">
			<h2 class="govuk-error-summary__title">
				There is a problem
			</h2>
			<div class="govuk-error-summary__body">
				<ul class="govuk-list govuk-error-summary__list"></ul>
			</div>
		</div>
	</div>

	<div class="govuk-grid-row">
		<div class="govuk-grid-column-two-thirds">
			<h1 class="govuk-heading-l">
				Add files
			</h1>

			<details class="govuk-details" data-module="govuk-details">
				<summary class="govuk-details__summary">
					<span class="govuk-details__summary-text">
						Files must be smaller than 1MB
					</span>
				</summary>
				<div class="govuk-details__text">
					<p>If each file is smaller than 1MB, add files one at a time.</p>
					<p>To add a file that is bigger than 1MB, select Continue on this screen and complete your report. You can email the files to the email address shown in the final screen, after you submit your report.</p>
				</div>
			</details>

			<details class="govuk-details" data-module="govuk-details">
				<summary class="govuk-details__summary">
					<span class="govuk-details__summary-text">
						File names must only use letters and numbers
					</span>
				</summary>
				<div class="govuk-details__text">
					<p class="govuk-body">File names must only contain letters and numbers. They must not contain other characters. For example '_' or '-'.</p>
				</div>
			</details>
		</div>
	</div>

	<div class="govuk-warning-text">
		<span class="govuk-warning-text__icon" aria-hidden="true">!</span>
		<strong class="govuk-warning-text__text">
			<span class="govuk-warning-text__assistive">Warning</span>
			Do not upload MAPPA files
		</strong>
	</div>

	<div class="moj-multi-file-upload moj-multi-file-upload--enhanced">
		<div class="moj-multi-file__uploaded-files moj-hidden">
			<h2 class="govuk-heading-m">Files added</h2>
			<div class="govuk-summary-list moj-multi-file-upload__list"></div>
		</div>

		<div class="moj-multi-file-upload__upload" id="moj-multi-file-upload__upload">
			<div class="govuk-form-group">
				<label class="govuk-label govuk-label--m" for="documents">
					Choose files
				</label>



				<div class="moj-multi-file-upload__dropzone">
					<input class="govuk-file-upload moj-multi-file-upload__input moj-hidden" id="documents" name="documents" type="file" multiple="" accept="" limit="1048576" limitmb="1" onchange="writeToContext(this);"/>
					<p class="govuk-body">Drag and drop files here or</p>
					<label tabindex="0" for="documents" class="govuk-button govuk-button--secondary">Choose files</label>
					<div aria-live="polite" role="status" class="govuk-visually-hidden"></div>
				</div>
			</div>

			<button class="govuk-button govuk-button--secondary moj-multi-file-upload__button" data-module="govuk-button">
				Upload file
			</button>
		</div>
	</div>

	<div class="govuk-button-group casa-form-control-block">
		<button data-prevent-double-click="true" class="govuk-button" data-module="govuk-button" id="continue-button">
			Continue
		</button>
	</div>
</form>
{% endblock %}

